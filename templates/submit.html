{% extends 'base.html' %}
{% block pagetitle %}
{{title}}
{% endblock pagetitle %}
{% block body %}

<div>
    <div class="container">
        <div class="row mb-5 text-center text-white">
            <div class="col-lg-10 mx-auto">
                <h1 class="display-4" style="padding-top: 2%;font-weight: 400;color: rgb(4, 54, 4);"><b>{{title}}üçÇ</b></h1>
            </div>
        </div>
        <div class="text-center mb-4">
            <h5><b>Translate this page:</b></h5>
            <div id="google_translate_element"></div>
        </div>
        <center>
            <div class="col">
                <div class="p-3 bg-white shadow rounded-lg" style="width: 30%;">
                    <img src={{image_url}} width="350" height="350">
                </div>
            </div>
        </center>
        <br>
        <div class="row ">
            <div class="col mx-auto">
                <div class="p-5 bg-white shadow rounded-lg" style="height: 95%;">
                    <h5><b>
                        {% if pred==3 or pred==5 or pred==7 or pred==11 or pred==15 or pred==18 or pred==20 or pred==23 or
                        pred==24 or pred==25 or pred==28 or pred==38 %}
                        Tips to Grow Healthy Plants :
                        {% else %}
                        Brief Descritpion :
                        {% endif %}
                    </b></h5>
                    <p id="desc-text">{{desc}}</p>
                    <button id="desc-speak-btn" class="btn btn-outline-success">Listen</button>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col mx-auto">
                <div class="p-5 bg-white shadow rounded-lg" style="height:95%">
                    <h5><b>
                        {% if pred==3 or pred==5 or pred==7 or pred==11 or pred==15 or pred==18 or pred==20 or pred==23 or
                        pred==24 or pred==25 or pred==28 or pred==38 %}
                        Benefits :
                        {% else %}
                        Prevent This Plant Disease By follow below steps :
                        {% endif %}
                    </b></h5>
                    <p id="prevent-text">{{prevent}}</p>
                    <button id="prevent-speak-btn" class="btn btn-outline-success">Listen</button>
                </div>
            </div>

            {% if pred!=4 %}
            <div class="col mx-auto">
                <div class="p-5 bg-white shadow rounded-lg" style="height: 95%;">
                    <center>
                        <h5><b>
                            {% if pred==3 or pred==5 or pred==7 or pred==11 or pred==15 or pred==18 or pred==20 or pred==23 or
                            pred==24 or pred==25 or pred==28 or pred==38 %}
                            Fertilizer :
                            {% else %}
                            Supplements :
                            {% endif %}
                        </b></h5>
                        <br>
                        <img src={{simage}} width="300" height="350">
                        <br>
                        <br>
                        <h6>{{sname}}</h6>

                        <a target="_blank" href={{buy_link}}><button type="button" class="btn btn-success"
                                style="background-color: #05380b;">Buy Product</button></a>
                    </center>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<script>
    const descText = document.getElementById('desc-text');
    const descSpeakBtn = document.getElementById('desc-speak-btn');
    const preventText = document.getElementById('prevent-text');
    const preventSpeakBtn = document.getElementById('prevent-speak-btn');

    function speakText(text) {
        if ('speechSynthesis' in window) {
            const currentLang = document.documentElement.lang;

            // Check if the current language is English
            if (currentLang === 'en' || currentLang.startsWith('en-')) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = currentLang;
                window.speechSynthesis.speak(utterance);
            } else {
                // If not English, speak the predefined phrase
                const utterance = new SpeechSynthesisUtterance("Only English");
                utterance.lang = 'en'; // Ensure this phrase is spoken in English
                window.speechSynthesis.speak(utterance);
            }
        } else {
            alert('Text-to-speech is not supported in your browser.');
        }
    }

    descSpeakBtn.addEventListener('click', () => {
        speakText(descText.innerText);
    });

    preventSpeakBtn.addEventListener('click', () => {
        speakText(preventText.innerText);
    });
</script>

<script type="text/javascript">
    function googleTranslateElementInit() {
        new google.translate.TranslateElement({
            pageLanguage: 'en',
            includedLanguages: 'hi,te',
            layout: google.translate.TranslateElement.InlineLayout.SIMPLE
        }, 'google_translate_element');
    }
</script>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

{% endblock body %}